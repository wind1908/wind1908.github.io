function SongsPickup(){}SongsPickup.prototype={el:"#app-songs-pickup",app:!1,init:function(){this.createApp()},createApp:function(){return!!$(this.el).length&&void(this.app=new Vue({el:this.el,data:{form:{style_id:0,popularity:2,only_russian:!1,first_id:0,page:0,last:0},firstRunned:!1,load:!1,silent:!1,list:[]},methods:{__resetForm:function(){var t=this.form;t.first_id=0,t.page=0,t.last=0,this.firstRunned=!1,this.load=!1,this.list=[]},submitNew:function(){return!this.load&&(this.__resetForm(),void this.getTracks())},getTracks:function(t){if(this.load)return!1;this.firstRunned||(this.firstRunned=!0);var i=this;this.load=!0,Global.ajax(this.form,"/songs",function(e){e.list&&e.list.data?(e.list.data=i.__prepareList(e.list.data),$.each(e.list.data,function(t,e){i.list.push(e)}),setTimeout(function(){i.__tracklistLoaded()},500),i.form.page=e.list.current_page,i.form.last=e.list.last_page,0==i.form.first_id&&(i.form.first_id=e.list.data.length?parseInt(e.list.data[0].id):0)):Global.msg.warn(Language.songs.notFound),i.load=!1,"function"==typeof t&&t()},function(){i.load=!1,"function"==typeof t&&t()})},__tracklistLoaded:function(){var t="#track-list li";SongsClass.prototype.track.bind(t),$(t+" .style").click(function(t){t.stopPropagation()})},loadMore:function(){if(this.load||this.form.page>=this.form.last)return!1;var t=this;this.form.page++,this.silent=!0,this.getTracks(function(){t.silent=!1})},__prepareList:function(t){return $.each(t,function(t,i){i.options={more:!1}}),t},toggleMore:function(t){this.list[t].options.more=!this.list[t].options.more},playVideo:function(t){var i=this.list[t];if(i){var e=$('#track-list li[data-id="'+i.id+'"] .play > a');SongsClass.prototype.video.bindSearch(e,i.title_info.title_prepared)}},highlightSong:function(t){return t.indexOf("(")>-1?Global.common.highText(t,"c9 no-block"):t},loadGenre:function(t){if(t>0&&!this.load){var i=this.form;i.style_id=t,i.popularity=2,i.only_russian=!1,setTimeout(function(){var t=$("#genre-selection").parent().children("input.combo-input"),i=$("#popularity-selection").parent().children("input.combo-input");t.val($("#genre-selection option:selected").text()),i.val($("#popularity-selection option:selected").text())},500),this.submitNew()}},clearListAndResetOptions:function(){Global.scrollTo("#content",1e3,10),this.__resetForm()}},computed:{percentOfPages:function(){var t=Math.round(parseFloat(100*this.form.page/this.form.last));return t<=100?t:100},loadMoreDisabled:function(){return this.load||this.form.page>=this.form.last},loadMoreText:function(){return this.load?Language.songs.wait:Language.songs.loadMore}},created:function(){var t=this;"undefined"!=typeof SONGS_APP_STYLE_ID&&(this.form.style_id=SONGS_APP_STYLE_ID,setTimeout(function(){t.getTracks()},300))},mounted:function(){var t=this;$("#genre-selection").comboSelect().change(function(i){t.form.style_id!=i.target.value&&(t.form.style_id=i.target.value,t.__resetForm())}),$("#popularity-selection").comboSelect().change(function(i){t.form.popularity!=i.target.value&&(t.form.popularity=i.target.value,t.__resetForm())})}}))}};